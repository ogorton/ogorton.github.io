# Creating a high-quality pdf of a printed book 

In my field of nuclear physics, there are some important books which are more than forty years old, 
out of print, and generally difficult to obtain physically or digitally.

For example, "Electron Radial Wave Functions and Nuclear Beta-Decay" by H. Behrens and W. Buhring,
published 1982.

I got my hands on a print copy of this book from a local University, and decided to scan it so that
I may maintain a personal reference for my research.

In this note, I'm going to explain the steps I took to produce a high-quality PDF document using my
iPhone camera, an iOS app, and some Linux software.

## ML Scans from the iPhone

I used an app called ["VFlat Scan - PDF Scanner"](https://www.vflat.com) to create the initial scan 
of the book. I tried 3-4 similar apps, and found that this one worked best for scanning books. 
Some nice features include:

- Automatic scanning - it finds the document and automatically takes the picture once it does
- 2-page scanning - two pages of an open book are scanned automatically and seperated by page
- Competent de-scewing and color correction - it does a pretty good first pass at flattening the
  the skewed image (due to the pages not being perfectly flat)
- Good UI with easy file management and export options, including PDF and raw images
- Free! It was free to use and free of adverstisements

My book had about 600 pages, and it took me about an hour to scan the whole thing.

## Collating and post-processing

After scanning all the pages, I had one PDF with the raw scans, and a folder with all of the pre-processed 
images. The PDF generated by the app is pretty good! Better than many book scans I've seen. 

Still, it had a number of artifacts (shadows, etc.) and the file size was quite large. I also wanted
nice things that modern PDFs offer:

- OCR
- Table of contents
- Meta data

So, I decided to try my hand at further processing the files on my Linux machine.

The tool I ended up using was gscan2pdf. Here's what I did with it:

- Imported the pre-processed images exported from vFlat
- Applied the "Cleanup" function, which increased the contrast of the pages, and further 
  de-skewed
  
After printing to file, this resulted in a greatly reduced PDF size. However, each page was 
a  slightly different size. To correct this, I used ghostscript to paste each page onto an
A4 sheet:

```
gs -o BB_150dpi.pdf -sDEVICE=pdfwrite -sPAPERSIZE=a4 -dFIXEDMEDIA -dPDFFitPage -dPDFSETTINGS=/ebook -dCompatibilityLevel=1.4 BehrensBuhring_clean_ragged.pdf
```
The setting `-dPDFSETTINGS=/ebook` also set the DPI to 150ppi.
   
   
 ## Results
 
 Coming soon...
